# WeChat DB Manager 使用说明

## 🚀 快速开始

### 1. 启动应用
```bash
cd packages/wechat-db-manager
pnpm install
pnpm tauri dev
```

### 2. 选择密钥文件
应用启动后，你会看到欢迎界面：

- **方法一：文件浏览器**
  - 点击 "Browse Files" 按钮
  - 选择你的 `.keys` 文件

- **方法二：手动输入路径**
  - 点击 "Enter Path" 按钮
  - 输入完整的文件路径，例如：`/Users/mark/projects/wechat-dbcracker/.keys`

### 3. 浏览数据库
文件加载成功后：
- 左侧会显示所有解析出的数据库
- 点击任意数据库查看详细信息
- 状态栏会显示加载状态和数据库数量

### 4. 探索数据
选择数据库后：
- 查看数据库基本信息（路径、大小、类型等）
- 浏览表结构
- 查看表数据（支持分页）
- 执行自定义 SQL 查询
- 导出数据为 CSV 格式

## 🛠️ 功能特性

### 文件管理
- ✅ 文件浏览器选择
- ✅ 手动路径输入
- ✅ 路径持久化保存
- ✅ 重新加载和更换文件

### 数据库管理
- ✅ 自动解析 `.keys` 文件
- ✅ 数据库类型识别和颜色标记
- ✅ 连接状态显示
- ✅ 错误处理和重试机制

### 数据浏览
- ✅ 表结构查看
- ✅ 数据分页显示
- ✅ 自定义 SQL 查询
- ✅ CSV 数据导出
- ✅ 搜索和过滤

### 用户体验
- ✅ 响应式界面设计
- ✅ 实时状态指示
- ✅ 友好的错误提示
- ✅ 快捷键支持

## 📋 支持的数据库类型

应用会自动识别以下数据库类型：
- **Message**: 聊天消息 (msg_0.db 到 msg_9.db)
- **Contact**: 联系人信息 (wccontact_new2.db)
- **Group**: 群组信息 (group_new.db)
- **Session**: 会话数据 (session_new.db)
- **Favorites**: 收藏内容 (favorites.db)
- **Media**: 媒体文件元数据 (mediaData.db)
- **Search**: 全文搜索索引 (ftsmessage.db)

## 🔧 故障排除

### 常见问题

1. **文件浏览器无法打开**
   - 使用 "Enter Path" 手动输入路径
   - 确保文件路径正确且有访问权限

2. **数据库解析失败**
   - 检查 `.keys` 文件格式是否正确
   - 确认数据库文件是否存在且可访问

3. **数据库连接失败**
   - 验证 SQLCipher 密钥是否正确
   - 检查数据库文件权限

4. **界面显示异常**
   - 刷新页面或重启应用
   - 检查控制台是否有错误信息

### 调试方法

1. **查看状态栏**
   - 实时显示当前状态
   - 显示错误信息和建议

2. **检查控制台**
   - 打开开发者工具
   - 查看详细错误日志

3. **重置应用状态**
   - 点击文件路径右上角的 "X" 按钮
   - 清除浏览器 localStorage 数据

## 💡 使用技巧

1. **快速重新加载**
   - 使用 "Reload" 按钮快速重新加载当前文件
   - 支持键盘快捷键

2. **批量操作**
   - 使用自定义 SQL 查询进行批量数据操作
   - 支持复杂的 JOIN 和聚合查询

3. **数据导出**
   - 支持表数据和查询结果导出
   - CSV 格式兼容 Excel 和其他数据处理工具

4. **性能优化**
   - 大表数据使用分页查看
   - 使用 LIMIT 子句限制查询结果数量

## 📞 获取帮助

如果遇到问题：
1. 查看应用内的错误提示和建议
2. 检查 DEVELOPMENT.md 文件中的详细说明
3. 确认 `.keys` 文件格式和路径正确性